var xa=apn.inheritWidget(apn.widgets["apn.wgt.rect"]);xa.styleMap.textValign=!1,xa.styleMap.dragX=!1,xa.styleMap.dragY=!1,xa.styleMap.dragInParent=!1,xa.styleMap.dragContainParent=!1,xa.APX_NO_POINTER_EV=!0,xa.editor=xa.editor||{},xa.editor.states={normal:"Normal",readonly:"Readonly"},xa.editor.properties={ty:{title:"Type",input:[{title:"Text",value:""},{title:"Number",value:"number"}]},mxl:{title:"MaxLength",input:""},sly:{title:"ScrollBarY",input:[{title:"Auto",value:""},{title:"Always",value:"s"},{title:"Hidden",value:"h"}]}},xa.properties=xa.properties||{},xa.properties.state="normal",xa.scriptInfo={wgtData:{selection:{help:"{start:0-based Number,end:1-based Number}\nSelection area of text"}},wgtRun:{focus:{param:"true",help:"Set focus on this input."}}},xa.exeSetState=function(t,e,n){"readonly"==n?(e.apxInputTag.readOnly=!0,e.apxInputTag.placeholder=""):(e.apxInputTag.readOnly=!1,e.apxInputTag.placeholder=t.wgtGetProperty(e.apnOID,"apxText")||"")},xa.exeCreateTag=function(t,e,n,a,i,r){var p;t.o.standAlone&&r&&(p=apn.CExe.getElementByAttr("div","data-apx-id",r))?(p.apnCur={},p.apnCur.apxCreatedFromTag=!0):(p=document.body.$TAG("div",{style:"position:absolute;box-sizing:border-box;"}),p.apnCur={});var o=apn.Project.getLayout(t.project).property.CExe,s="";o&&o.lng&&"N"==o.lng.ime||(s="ime-mode:active;");var l=n.create.data;if(l.styles&&!l.styles.textMultiLine)p.apnCur.apxCreatedFromTag?p.apxInputTag="input"==p.firstChild.tagName.toLowerCase()?p.firstChild:p.firstChild.firstChild:p.apxInputTag=p.$TAG("input",{type:l.properties&&l.properties.attrs&&l.properties.attrs.ty?l.properties.attrs.ty:"text",style:s+"opacity:1;color:inherit;text-decoration:inherit;background-color:inherit;text-align:inherit;font:inherit;position:absolute;left:0px;top:0px;margin:0px;padding:0px;height:100%;width:100%;border:none;outline:none;"});else{var u="auto";l.properties&&l.properties.attrs&&"s"==l.properties.attrs.sly?u="scroll":l.properties&&l.properties.attrs&&"h"==l.properties.attrs.sly&&(u="hidden"),l.styles.textValign="top",p.apnCur.apxCreatedFromTag?p.apxInputTag="textarea"==p.firstChild.tagName.toLowerCase()?p.firstChild:p.firstChild.firstChild:(p.apxInputTag=p.$TAG("textarea",{style:s+"opacity:1;color:inherit;text-decoration:inherit;background-color:inherit;text-align:inherit;font:inherit;position:absolute;left:0px;top:0px;overflow-y:"+u+";overflow-x:hidden;resize:none;margin:0px;padding:0px;height:100%;width:100%;border:none;outline:none;"}),p.apxInputTag.$A({class:"apnCExeScroll"}))}if(l.properties&&l.properties.attrs&&l.properties.attrs.mxl){var x=bx.$checkNaN(parseInt(l.properties.attrs.mxl));x&&(p.apxInputTag.setAttribute("maxlength",x),l.properties&&l.properties.attrs&&"number"==l.properties.attrs.ty&&p.apxInputTag.setAttribute("max",Math.pow(10,x)-1))}var d={start:0,end:0};return bx.Event.add(p.apxInputTag,"input",function(){this.parentNode.apnOID&&(d.start=this.selectionStart,d.end=this.selectionEnd,e.wgtSetProperty(this.parentNode.apnOID,"selection",d,!0),e.fireEvent("inputChange",void 0,this.parentNode.apnOID))},!1),bx.Event.add(p.apxInputTag,"focus",function(){this.parentNode.apnOID&&e.fireEvent("inputFocus",void 0,this.parentNode.apnOID)},!1),bx.Event.add(p.apxInputTag,"blur",function(){this.parentNode.apnOID&&e.fireEvent("inputBlur",void 0,this.parentNode.apnOID)},!1),bx.Event.add(p.apxInputTag,"select",function(){this.parentNode.apnOID&&(d.start=this.selectionStart,d.end=this.selectionEnd,e.wgtSetProperty(this.parentNode.apnOID,"selection",d,!0))},!1),p.apxInputTag.apxOnEvent=function(t,n,a,i){"click"==n&&(d.start=this.selectionStart,d.end=this.selectionEnd,e.wgtSetProperty(this.parentNode.apnOID,"selection",d,!0))},p.apxInputTag.$CSS("textShadow","inherit"),p.apnOnSetText=function(t,e,n,a,i,r,p,o,s,l){if(n&&(t._initValign=n),a&&(t._initAlign=a),void 0!==i&&(t._initMultiLine=i),void 0!==r&&(t._initWordWrap=r),void 0!==p&&(t._initFont=p),l&&(t._initFontSize=l),o&&(t._initLtrSp=o),s&&(t._initLnSp=s),p=p||t._initFont,s=s||t._initLnSp,o=o||t._initLtrSp,l){var u=1.2;apn.fonts&&apn.fonts[p]&&void 0!==apn.fonts[p].height&&(u=apn.fonts[p].height);var x=l*u;s&&(x+=s),t.apxInputTag.style.lineHeight=x+"px",o?t.apxInputTag.style.letterSpacing=o+"px":t.apxInputTag.style.letterSpacing="normal"}},p},xa.exeRenderTag=function(t,e,n,a,i,r){return apn.widgets.utils.exeRenderTag.call(this,void 0,t,e,n,a,i,r)},xa.pubOnGetHTML=function(t,e,n){function a(t,e,n,a){var i="",r=apn.Project.getLayout(t).property.CExe;r&&r.lng&&"N"==r.lng.ime||(i+="ime-mode:active;");var p,o="",s=apn.Project.getExeModule(t);if(s.IStub_pubProcWgtAttr&&(p=s.IStub_pubProcWgtAttr(t,e,n))&&p.attr0)for(var l in p.attr0)void 0!==p.attr0[l]&&(o+=" "+l+'="'+p.attr0[l]+'"');var u=t.pages[e].objects[n].create.data;if(i+="opacity:1;color:inherit;text-decoration:inherit;background-color:"+(a.style.fillStyle||"inherit")+";text-align:inherit;font:inherit;position:absolute;left:0px;top:0px;margin:0px;padding:0px;height:100%;width:100%;border:none;outline:none;",u.styles&&!u.styles.textMultiLine)return"<input"+o+' type="'+(u.properties&&u.properties.attrs&&u.properties.attrs.ty?u.properties.attrs.ty:"text")+'" style="'+i+'"></input>';var x="auto";return u.properties&&u.properties.attrs&&"s"==u.properties.attrs.sly?x="scroll":u.properties&&u.properties.attrs&&"h"==u.properties.attrs.sly&&(x="hidden"),i+="overflow-y:"+x+";overflow-x:hidden;resize:none;","<textarea"+o+' style="'+i+'" class="apnCExeScroll"></textarea>'}return apn.widgets.utils.getHTML.call(this,void 0,t,e,n,a)},xa.exeOnLoad=function(t,e){function n(t,n){t==e&&i.apxInputTag.focus()}function a(t,n){t==e&&n&&i.apxInputTag.setSelectionRange(n.start,n.end)}var i=t.wgtTag(e);bx.HCL.DV.isIE()&&(i.apxInputTag.style.backgroundColor=i.style.backgroundColor),t.wgtSetProperty(e,"selection",{start:0,end:0},!0),t.wgtListenProperty(e,"focus",n),t.wgtListenProperty(e,"selection",a)},xa.exeOnStart=function(t,e){t.fireEvent("inputSet",void 0,e)},xa.exeInputGet=function(t,e){return e.apxInputTag.value},xa.exeInputSet=function(t,e,n){return e.apxInputTag.value!=n&&t.fireEvent("inputSet",void 0,e.apnOID),e.apxInputTag.value=n},xa.edtOnBuildEvent=function(t,e,n,a){a.inputChange={value:"inputChange",title:apn.P.eventTitle.inputChange},a.inputSet={value:"inputSet",title:apn.P.eventTitle.inputSet},a.inputFocus={value:"inputFocus",title:apn.P.eventTitle.inputFocus},a.inputBlur={value:"inputBlur",title:apn.P.eventTitle.inputBlur}},uxWgtInputText=xa;
